# ===================================================================
# Spring Boot configuration.
#
# This configuration will be overridden by the Spring profile you use,
# for example application-dev.yml if you use the "dev" profile.
#
# Full reference for Standard Spring Boot properties is available at:
# http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
# ===================================================================
# set -Dspring.profiles.active=<dev|sit|int> as JVM argument to run in desired profile
# If no profile is specified explicitly, application will fall back to default profile, which is "local"

spring:
    application:
        name: spring-boot-sample-service

#------------------------- Database configuration -------------------------
    datasource:
        url: ${POSTGRES_URL:jdbc:postgresql://localhost:5432/sample_db}
        username: ${POSTGRES_USERNAME:postgres}
        password: ${POSTGRES_PASSWORD:admin}
        hikari:
            pool-name: sample-connection-pool
            maximum-pool-size: 32
            minimum-idle: 8
    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: false
        properties:
            '[hibernate.show_sql]': false
            '[hibernate.format_sql]': true
            '[hibernate.use_sql_comments]': true
            '[hibernate.jdbc.time_zone]': UTC
            '[integration.envers.enabled]': true

    flyway:
        enabled: true
        locations: 
            - classpath:/db/migration
    messages:
        basename: i18n/messages,i18n/errors,i18n/problems
        use-code-as-default-message: true
        #cache-duration=PT10S
        #fallback-to-system-locale=true
    task:
        execution:
            thread-name-prefix: sample-task-executor-
            pool:
                core-size: 8
                max-size: 32
                queue-capacity: 10000
                keep-alive: "10s"    
    jackson:
        serialization:
            write-dates-with-zone-id: true
            write-dates-as-timestamps: false
    #hateoas:
        #use-hal-as-default-json-media-type: false
    mvc:
        pathmatch:
            matching-strategy: ant-path-matcher
        problemdetails:
            enabled: false

#------------------------- Swagger configuration -------------------------
springdoc:
    show-actuator: true
    group-configs:
        -
            group: actuator
            display-name: Actuator
            paths-to-match: /actuator/**
        -
            group: application
            display-name: Application
            paths-to-match: /**
            paths-to-exclude: /actuator/**

#------------------------- Actuators configuration -------------------------
# If not specified '/actuator' is taken as default. If specified must start with '/'
#management.endpoints.web.base-path=/
# Set it as "*", if you want to expose all actuator endpoints
management:
    endpoint:
        health:
            enabled: true
    endpoints:
        web:
            exposure:
                include: info,health,metrics
    metrics:
        tags:
            application: ${spring.application.name}

problem:
    type-url: http://localhost:8080/problems/help.html
    debug-enabled: false
    stacktrace-enabled: false
    cause-chains-enabled: false

server:
    port: 8080
    forward-headers-strategy: framework
#    servlet:
#        context-path: /api
logging:
    level:
        ROOT: DEBUG
debug: false

# ===================================================================
# Application specific properties
# Add your own application properties here
# ===================================================================

        